{"version":3,"sources":["speech.babel.js"],"names":["openSpeechRecognition","window","SpeechRecognition","webkitSpeechRecognition","speech","callback","addEventListener","e","transcript","Array","from","results","map","result","join","isFinal","start","speechClick","text","sendText","console","log","$","ajax","type","url","data","success","res","resp","output","SpeechSynthesisUtterance","speechSynthesis","speak","error","err"],"mappings":"YAAA,SAASA,yBAGL,MAFAC,QAAOC,kBAAoBD,OAAOC,mBAAqBD,OAAOE,wBAC1C,GAAID,mBAI5B,QAASE,QAAOC,GACZL,wBAAwBM,iBAAiB,SAAU,SAAAC,GAC/C,GAAIC,GAAaC,MAAMC,KAAKH,EAAEI,SAC7BC,IAAI,SAAAC,GAAA,MAAUA,GAAO,KACrBD,IAAI,SAAAC,GAAA,MAAUA,GAAOL,aACrBM,KAAK,GAEFP,GAAEI,QAAQ,GAAGI,SACbV,EAASG,KAGjBR,wBAAwBgB,QAG5B,QAASC,eACLb,OAAO,SAASc,GACZC,SAASD,GACTE,QAAQC,IAAIH,KAKpB,QAASC,UAASD,GACdI,EAAEC,MACEC,KAAM,OACNC,IAAK,gBACLC,MAAOR,KAAMA,GACbS,QAAS,SAASC,GACd,GAAIC,GAAOD,EAAIE,OAAOZ,KAAK,EAC3BE,SAAQC,IAAIQ,EAEF,IAAIE,0BAAyBF,EACvC5B,QAAO+B,gBAAgBC,MAAMJ,IAEjCK,MAAO,SAASC,GACZf,QAAQC,IAAIc","file":"speech.babel.js","sourcesContent":["function openSpeechRecognition() {\n    window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    const recognition = new SpeechRecognition();\n    return recognition;\n}\n\nfunction speech(callback){\n    openSpeechRecognition().addEventListener('result', e => {\n        let transcript = Array.from(e.results)\n        .map(result => result[0])\n        .map(result => result.transcript)\n        .join('');\n\n        if (e.results[0].isFinal) {\n            callback(transcript);\n        }\n    });\n    openSpeechRecognition().start();\n}\n\nfunction speechClick(){\n    speech(function(text){\n        sendText(text);\n        console.log(text);\n    });\n}\n\n\nfunction sendText(text){\n    $.ajax({\n        type: \"POST\",\n        url: \"/conversation\",\n        data: {text: text},\n        success: function(res){\n            var resp = res.output.text[0];\n            console.log(resp);\n\n            var msg = new SpeechSynthesisUtterance(resp);\n            window.speechSynthesis.speak(resp);\n        },\n        error: function(err){\n            console.log(err);\n        }\n    });\n}"]}